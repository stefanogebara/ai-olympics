<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Olympics - Word Challenge</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      padding: 30px;
      color: #fff;
    }
    .header { text-align: center; margin-bottom: 30px; }
    .header h1 { font-size: 2.2rem; background: linear-gradient(90deg, #00d4ff, #7c3aed, #ff6b6b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
    .timer { position: fixed; top: 20px; right: 20px; background: rgba(0, 0, 0, 0.6); padding: 15px 25px; border-radius: 10px; font-family: monospace; font-size: 1.5rem; color: #00d4ff; z-index: 100; }
    .progress-bar { max-width: 600px; margin: 0 auto 30px; background: rgba(255, 255, 255, 0.1); height: 10px; border-radius: 5px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #7c3aed, #00d4ff); transition: width 0.3s; }
    .stats-bar { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; }
    .stat { text-align: center; }
    .stat-value { font-size: 1.5rem; font-weight: bold; color: #00d4ff; }
    .stat-label { font-size: 0.8rem; color: #a0aec0; }
    .puzzle-container { max-width: 600px; margin: 0 auto; }
    .puzzle-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 30px; margin-bottom: 20px; text-align: center; }
    .puzzle-number { color: #7c3aed; font-size: 0.9rem; margin-bottom: 15px; }
    .scrambled-word { font-size: 2.5rem; font-weight: bold; letter-spacing: 8px; color: #00d4ff; margin: 25px 0; font-family: 'Courier New', monospace; text-transform: uppercase; }
    .hint-container { margin: 20px 0; }
    .hint-btn { padding: 8px 20px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; color: #a0aec0; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; }
    .hint-btn:hover:not(:disabled) { background: rgba(255, 255, 255, 0.15); color: white; }
    .hint-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .hint-text { margin-top: 10px; padding: 10px 15px; background: rgba(237, 137, 54, 0.2); border-radius: 8px; color: #ed8936; font-size: 0.9rem; }
    .input-group { display: flex; gap: 10px; margin-top: 20px; }
    .answer-input { flex: 1; padding: 14px; background: rgba(255, 255, 255, 0.08); border: 2px solid rgba(255, 255, 255, 0.15); border-radius: 10px; color: white; font-size: 1.2rem; text-align: center; text-transform: uppercase; letter-spacing: 3px; }
    .answer-input:focus { outline: none; border-color: #7c3aed; }
    .submit-btn { padding: 14px 30px; background: linear-gradient(90deg, #7c3aed, #00d4ff); border: none; border-radius: 10px; color: white; font-size: 1rem; font-weight: 600; cursor: pointer; transition: opacity 0.2s; }
    .submit-btn:hover { opacity: 0.9; }
    .submit-btn:disabled { background: #4a5568; cursor: not-allowed; }
    .feedback { margin-top: 15px; padding: 12px; border-radius: 8px; text-align: center; font-weight: 500; }
    .feedback.correct { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
    .feedback.incorrect { background: rgba(252, 129, 129, 0.2); color: #fc8181; }
    .hidden { display: none; }
    .success-screen { text-align: center; padding: 40px; max-width: 600px; margin: 0 auto; }
    .success-icon { font-size: 4rem; margin-bottom: 20px; }
    .success-screen h2 { color: #48bb78; font-size: 2rem; margin-bottom: 15px; }
    .score-display { font-size: 3rem; font-weight: bold; color: #00d4ff; margin: 20px 0; }
    .results-summary { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 25px 0; }
    .result-item { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; }
    .result-item-value { font-size: 1.5rem; font-weight: bold; color: #00d4ff; }
    .result-item-label { font-size: 0.85rem; color: #a0aec0; }
    .results-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 20px; }
    .result-box { padding: 15px 10px; border-radius: 8px; text-align: center; }
    .result-box.correct { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
    .result-box.incorrect { background: rgba(252, 129, 129, 0.2); color: #fc8181; }
  </style>
</head>
<body>
  <div class="timer" id="timer">00:00</div>

  <div class="header">
    <h1>Word Challenge</h1>
    <p style="color: #a0aec0;">Unscramble 10 words - hints cost points!</p>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
  </div>

  <div class="stats-bar">
    <div class="stat">
      <div class="stat-value" id="scoreDisplay">0</div>
      <div class="stat-label">Score</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="correctDisplay">0</div>
      <div class="stat-label">Correct</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="puzzleNum">1/10</div>
      <div class="stat-label">Word</div>
    </div>
  </div>

  <div class="puzzle-container" id="puzzleContainer"></div>

  <div class="success-screen hidden" id="successScreen">
    <div class="success-icon">LETTERS</div>
    <h2>Challenge Complete!</h2>
    <div class="score-display">Score: <span id="finalScore">0</span>/1000</div>
    <div class="results-summary">
      <div class="result-item">
        <div class="result-item-value" id="finalCorrect">0</div>
        <div class="result-item-label">Words Solved</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="finalTime">0s</div>
        <div class="result-item-label">Total Time</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="hintsUsed">0</div>
        <div class="result-item-label">Hints Used</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="accuracy">0%</div>
        <div class="result-item-label">Accuracy</div>
      </div>
    </div>
    <div class="results-grid" id="resultsGrid"></div>
  </div>

  <script>
    // Word puzzles with hints
    const wordPuzzles = [
      { word: 'PYTHON', hint: 'A popular programming language (also a snake)' },
      { word: 'GALAXY', hint: 'A massive system of stars in space' },
      { word: 'OXYGEN', hint: 'We breathe this to live' },
      { word: 'PLANET', hint: 'Earth is one of these' },
      { word: 'PUZZLE', hint: 'A problem to solve for fun' },
      { word: 'RHYTHM', hint: 'The beat in music' },
      { word: 'WIZARD', hint: 'A magical person with powers' },
      { word: 'BRONZE', hint: 'Third place medal material' },
      { word: 'JACKET', hint: 'Outerwear for cold weather' },
      { word: 'FROZEN', hint: 'Very cold, like ice' }
    ];

    // Alternative word sets
    const wordSets = [
      [
        { word: 'GARDEN', hint: 'Where flowers grow' },
        { word: 'SUMMER', hint: 'Warmest season of the year' },
        { word: 'ROCKET', hint: 'Vehicle that goes to space' },
        { word: 'ISLAND', hint: 'Land surrounded by water' },
        { word: 'BRIDGE', hint: 'Crosses over water or roads' },
        { word: 'CIPHER', hint: 'A secret code' },
        { word: 'KNIGHT', hint: 'Medieval warrior in armor' },
        { word: 'ANCHOR', hint: 'Keeps a ship in place' },
        { word: 'JIGSAW', hint: 'Type of puzzle with pieces' },
        { word: 'SPHINX', hint: 'Egyptian mythical creature' }
      ],
      [
        { word: 'STREAM', hint: 'Small flowing body of water' },
        { word: 'MASTER', hint: 'Expert or leader' },
        { word: 'TRAVEL', hint: 'Going from place to place' },
        { word: 'LAUNCH', hint: 'To start or send off' },
        { word: 'BRANCH', hint: 'Part of a tree' },
        { word: 'FLIGHT', hint: 'Birds and planes do this' },
        { word: 'SHADOW', hint: 'Dark shape cast by light' },
        { word: 'MUSCLE', hint: 'Body tissue for movement' },
        { word: 'CIRCLE', hint: 'Round geometric shape' },
        { word: 'THRONE', hint: 'Where a king sits' }
      ]
    ];

    // State
    let puzzles = [];
    let currentPuzzle = 0;
    let answers = [];
    let score = 0;
    let correctCount = 0;
    let totalHintsUsed = 0;
    let currentHintUsed = false;
    let startTime = Date.now();

    // DOM Elements
    const timerEl = document.getElementById('timer');
    const progressFill = document.getElementById('progressFill');
    const puzzleContainer = document.getElementById('puzzleContainer');
    const successScreen = document.getElementById('successScreen');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const correctDisplay = document.getElementById('correctDisplay');
    const puzzleNum = document.getElementById('puzzleNum');

    // Scramble a word
    function scrambleWord(word) {
      const letters = word.split('');
      let scrambled = word;
      let attempts = 0;

      // Make sure it's actually scrambled
      while (scrambled === word && attempts < 20) {
        for (let i = letters.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          const temp = letters[i];
          letters[i] = letters[j];
          letters[j] = temp;
        }
        scrambled = letters.join('');
        attempts++;
      }

      return scrambled;
    }

    // Initialize puzzles
    function initPuzzles() {
      // Randomly select a word set
      const setIndex = Math.floor(Math.random() * (wordSets.length + 1));
      const selectedSet = setIndex < wordSets.length ? wordSets[setIndex] : wordPuzzles;

      puzzles = selectedSet.map(function(p) {
        return {
          word: p.word,
          scrambled: scrambleWord(p.word),
          hint: p.hint
        };
      });

      renderPuzzle(0);
      updateTimer();
    }

    function updateTimer() {
      setInterval(function() {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        timerEl.textContent = String(minutes).padStart(2, '0') + ':' + String(seconds).padStart(2, '0');
      }, 1000);
    }

    function renderPuzzle(index) {
      const p = puzzles[index];
      currentHintUsed = false;
      progressFill.style.width = ((index / puzzles.length) * 100) + '%';
      puzzleNum.textContent = (index + 1) + '/' + puzzles.length;

      // Clear container safely
      while (puzzleContainer.firstChild) {
        puzzleContainer.removeChild(puzzleContainer.firstChild);
      }

      const card = document.createElement('div');
      card.className = 'puzzle-card';

      // Puzzle number
      const numDiv = document.createElement('div');
      numDiv.className = 'puzzle-number';
      numDiv.textContent = 'Word ' + (index + 1) + ' of ' + puzzles.length;

      // Scrambled word display
      const scrambledDiv = document.createElement('div');
      scrambledDiv.className = 'scrambled-word';
      scrambledDiv.textContent = p.scrambled;

      // Hint container
      const hintContainer = document.createElement('div');
      hintContainer.className = 'hint-container';

      const hintBtn = document.createElement('button');
      hintBtn.className = 'hint-btn';
      hintBtn.id = 'hintBtn';
      hintBtn.textContent = 'Show Hint (-30 points)';
      hintBtn.onclick = function() { showHint(p.hint); };

      hintContainer.appendChild(hintBtn);

      // Input group
      const inputGroup = document.createElement('div');
      inputGroup.className = 'input-group';

      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'answer-input';
      input.id = 'answerInput';
      input.placeholder = 'Your answer';
      input.maxLength = p.word.length;
      input.setAttribute('aria-label', 'Enter the unscrambled word');

      const submitBtn = document.createElement('button');
      submitBtn.className = 'submit-btn';
      submitBtn.id = 'submitBtn';
      submitBtn.textContent = 'Submit';

      inputGroup.appendChild(input);
      inputGroup.appendChild(submitBtn);

      // Feedback area
      const feedbackDiv = document.createElement('div');
      feedbackDiv.className = 'feedback hidden';
      feedbackDiv.id = 'feedback';

      card.appendChild(numDiv);
      card.appendChild(scrambledDiv);
      card.appendChild(hintContainer);
      card.appendChild(inputGroup);
      card.appendChild(feedbackDiv);
      puzzleContainer.appendChild(card);

      // Event listeners
      submitBtn.onclick = submitAnswer;
      input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') submitAnswer();
      });

      input.focus();
    }

    function showHint(hintText) {
      if (currentHintUsed) return;

      currentHintUsed = true;
      totalHintsUsed++;

      const hintBtn = document.getElementById('hintBtn');
      hintBtn.disabled = true;
      hintBtn.textContent = 'Hint Used';

      const hintContainer = hintBtn.parentNode;
      const hintDiv = document.createElement('div');
      hintDiv.className = 'hint-text';
      hintDiv.textContent = hintText;
      hintContainer.appendChild(hintDiv);
    }

    function submitAnswer() {
      const input = document.getElementById('answerInput');
      const userAnswer = input.value.trim().toUpperCase();

      if (!userAnswer) {
        input.style.borderColor = '#fc8181';
        return;
      }

      const p = puzzles[currentPuzzle];
      const isCorrect = userAnswer === p.word;

      // Calculate points
      let points = 0;
      if (isCorrect) {
        points = 100; // Base points
        if (currentHintUsed) {
          points -= 30; // Hint penalty
        }
        score += points;
        correctCount++;
      }

      answers.push({
        puzzleIndex: currentPuzzle,
        word: p.word,
        userAnswer: userAnswer,
        correct: isCorrect,
        usedHint: currentHintUsed,
        points: points
      });

      // Update displays
      scoreDisplay.textContent = score;
      correctDisplay.textContent = correctCount;

      // Show feedback
      const feedback = document.getElementById('feedback');
      feedback.classList.remove('hidden', 'correct', 'incorrect');
      feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
      feedback.textContent = isCorrect ? 'Correct!' : 'Incorrect. The word was: ' + p.word;

      // Disable input and buttons
      input.disabled = true;
      document.getElementById('submitBtn').disabled = true;
      const hintBtn = document.getElementById('hintBtn');
      if (hintBtn) hintBtn.disabled = true;

      setTimeout(function() {
        nextPuzzle();
      }, 1500);
    }

    function nextPuzzle() {
      if (currentPuzzle < puzzles.length - 1) {
        currentPuzzle++;
        renderPuzzle(currentPuzzle);
      } else {
        showResults();
      }
    }

    function showResults() {
      const totalTime = (Date.now() - startTime) / 1000;
      const finalScore = Math.min(1000, score);

      puzzleContainer.classList.add('hidden');
      progressFill.style.width = '100%';
      successScreen.classList.remove('hidden');

      document.getElementById('finalScore').textContent = finalScore;
      document.getElementById('finalCorrect').textContent = correctCount + '/' + puzzles.length;
      document.getElementById('finalTime').textContent = totalTime.toFixed(1) + 's';
      document.getElementById('hintsUsed').textContent = totalHintsUsed;
      document.getElementById('accuracy').textContent = Math.round((correctCount / puzzles.length) * 100) + '%';

      const resultsGrid = document.getElementById('resultsGrid');
      while (resultsGrid.firstChild) {
        resultsGrid.removeChild(resultsGrid.firstChild);
      }

      answers.forEach(function(answer, i) {
        const box = document.createElement('div');
        box.className = 'result-box ' + (answer.correct ? 'correct' : 'incorrect');

        const wLabel = document.createElement('div');
        wLabel.textContent = 'W' + (i + 1);

        const result = document.createElement('div');
        result.textContent = answer.correct ? 'OK' : 'X';

        box.appendChild(wLabel);
        box.appendChild(result);
        resultsGrid.appendChild(box);
      });

      console.log('WORD_COMPLETE', {
        completionTime: totalTime,
        timestamp: Date.now(),
        correctCount: correctCount,
        totalPuzzles: puzzles.length,
        hintsUsed: totalHintsUsed,
        answers: answers,
        score: finalScore
      });
    }

    // Start
    initPuzzles();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Olympics - Logic Challenge</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      padding: 30px;
      color: #fff;
    }
    .header { text-align: center; margin-bottom: 30px; }
    .header h1 { font-size: 2.2rem; background: linear-gradient(90deg, #00d4ff, #7c3aed, #ff6b6b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
    .timer { position: fixed; top: 20px; right: 20px; background: rgba(0, 0, 0, 0.6); padding: 15px 25px; border-radius: 10px; font-family: monospace; font-size: 1.5rem; color: #00d4ff; z-index: 100; }
    .progress-bar { max-width: 700px; margin: 0 auto 30px; background: rgba(255, 255, 255, 0.1); height: 10px; border-radius: 5px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #7c3aed, #00d4ff); transition: width 0.3s; }
    .stats-bar { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; }
    .stat { text-align: center; }
    .stat-value { font-size: 1.5rem; font-weight: bold; color: #00d4ff; }
    .stat-label { font-size: 0.8rem; color: #a0aec0; }
    .puzzle-container { max-width: 700px; margin: 0 auto; }
    .puzzle-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 30px; margin-bottom: 20px; }
    .puzzle-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .puzzle-number { color: #7c3aed; font-size: 0.9rem; }
    .puzzle-type { padding: 4px 12px; background: rgba(0, 212, 255, 0.2); border-radius: 20px; font-size: 0.8rem; color: #00d4ff; }
    .puzzle-question { color: #e2e8f0; line-height: 1.8; font-size: 1.1rem; margin-bottom: 25px; }
    .sequence-display { display: flex; justify-content: center; gap: 15px; margin: 30px 0; flex-wrap: wrap; }
    .sequence-item { width: 60px; height: 60px; background: rgba(124, 58, 237, 0.2); border: 2px solid rgba(124, 58, 237, 0.5); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; font-weight: bold; color: #00d4ff; }
    .sequence-item.unknown { background: rgba(255, 255, 255, 0.1); border-style: dashed; color: #a0aec0; }
    .options-list { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 20px; }
    .option-btn { padding: 16px 20px; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 12px; color: white; font-size: 1rem; cursor: pointer; transition: all 0.2s; text-align: center; }
    .option-btn:hover:not(:disabled) { background: rgba(255, 255, 255, 0.1); border-color: rgba(124, 58, 237, 0.5); }
    .option-btn:disabled { cursor: not-allowed; opacity: 0.6; }
    .option-btn.correct { background: rgba(72, 187, 120, 0.2); border-color: #48bb78; }
    .option-btn.incorrect { background: rgba(252, 129, 129, 0.2); border-color: #fc8181; }
    .text-input-group { display: flex; gap: 10px; margin-top: 20px; }
    .answer-input { flex: 1; padding: 14px; background: rgba(255, 255, 255, 0.08); border: 2px solid rgba(255, 255, 255, 0.15); border-radius: 10px; color: white; font-size: 1.1rem; text-align: center; }
    .answer-input:focus { outline: none; border-color: #7c3aed; }
    .submit-btn { padding: 14px 30px; background: linear-gradient(90deg, #7c3aed, #00d4ff); border: none; border-radius: 10px; color: white; font-size: 1rem; font-weight: 600; cursor: pointer; }
    .submit-btn:disabled { background: #4a5568; cursor: not-allowed; }
    .feedback { margin-top: 15px; padding: 12px; border-radius: 8px; text-align: center; font-weight: 500; }
    .feedback.correct { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
    .feedback.incorrect { background: rgba(252, 129, 129, 0.2); color: #fc8181; }
    .hidden { display: none; }
    .success-screen { text-align: center; padding: 40px; max-width: 600px; margin: 0 auto; }
    .success-icon { font-size: 4rem; margin-bottom: 20px; }
    .success-screen h2 { color: #48bb78; font-size: 2rem; margin-bottom: 15px; }
    .score-display { font-size: 3rem; font-weight: bold; color: #00d4ff; margin: 20px 0; }
    .results-summary { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 25px 0; }
    .result-item { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; }
    .result-item-value { font-size: 1.5rem; font-weight: bold; color: #00d4ff; }
    .result-item-label { font-size: 0.85rem; color: #a0aec0; }
    .results-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 20px; }
    .result-box { padding: 15px 10px; border-radius: 8px; text-align: center; }
    .result-box.correct { background: rgba(72, 187, 120, 0.2); color: #48bb78; }
    .result-box.incorrect { background: rgba(252, 129, 129, 0.2); color: #fc8181; }
  </style>
</head>
<body>
  <div class="timer" id="timer">00:00</div>

  <div class="header">
    <h1>Logic Challenge</h1>
    <p style="color: #a0aec0;">Solve 5 pattern recognition and logic puzzles!</p>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
  </div>

  <div class="stats-bar">
    <div class="stat">
      <div class="stat-value" id="scoreDisplay">0</div>
      <div class="stat-label">Score</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="correctDisplay">0</div>
      <div class="stat-label">Correct</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="puzzleNum">1/5</div>
      <div class="stat-label">Puzzle</div>
    </div>
  </div>

  <div class="puzzle-container" id="puzzleContainer"></div>

  <div class="success-screen hidden" id="successScreen">
    <div class="success-icon">BRAIN</div>
    <h2>Challenge Complete!</h2>
    <div class="score-display">Score: <span id="finalScore">0</span>/1000</div>
    <div class="results-summary">
      <div class="result-item">
        <div class="result-item-value" id="finalCorrect">0</div>
        <div class="result-item-label">Correct Answers</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="finalTime">0s</div>
        <div class="result-item-label">Total Time</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="avgTime">0s</div>
        <div class="result-item-label">Avg Per Puzzle</div>
      </div>
      <div class="result-item">
        <div class="result-item-value" id="accuracy">0%</div>
        <div class="result-item-label">Accuracy</div>
      </div>
    </div>
    <div class="results-grid" id="resultsGrid"></div>
  </div>

  <script>
    // Logic puzzles
    const puzzles = [
      {
        type: 'sequence',
        question: 'What number comes next in this sequence?',
        sequence: [2, 4, 8, 16, 32],
        answer: '64',
        options: ['48', '64', '56', '128'],
        explanation: 'Each number is multiplied by 2'
      },
      {
        type: 'pattern',
        question: 'If all Bloops are Razzies and all Razzies are Lazzies, then all Bloops are definitely Lazzies.',
        answer: 'true',
        options: ['True', 'False', 'Cannot be determined', 'Only some Bloops'],
        explanation: 'This is a valid syllogism - if A implies B and B implies C, then A implies C'
      },
      {
        type: 'sequence',
        question: 'What number comes next in this sequence?',
        sequence: [1, 1, 2, 3, 5, 8],
        answer: '13',
        options: ['10', '11', '13', '15'],
        explanation: 'Fibonacci sequence - each number is the sum of the two before it'
      },
      {
        type: 'deduction',
        question: 'In a race, Alex finished before Bob but after Carol. Dave finished before Carol. Who won the race?',
        answer: 'dave',
        options: ['Alex', 'Bob', 'Carol', 'Dave'],
        explanation: 'Order: Dave, Carol, Alex, Bob'
      },
      {
        type: 'sequence',
        question: 'What letter comes next in this sequence?',
        sequence: ['A', 'C', 'E', 'G', 'I'],
        answer: 'k',
        answerDisplay: 'K',
        options: ['J', 'K', 'L', 'M'],
        explanation: 'Every other letter in the alphabet'
      }
    ];

    // Alternative puzzle set
    const puzzleSet2 = [
      {
        type: 'sequence',
        question: 'What number comes next in this sequence?',
        sequence: [3, 6, 12, 24, 48],
        answer: '96',
        options: ['72', '84', '96', '108'],
        explanation: 'Each number is multiplied by 2'
      },
      {
        type: 'pattern',
        question: 'If some cats are black and all black things absorb light, then some cats absorb light.',
        answer: 'true',
        options: ['True', 'False', 'Cannot be determined', 'All cats absorb light'],
        explanation: 'Valid deduction - some cats (the black ones) must absorb light'
      },
      {
        type: 'sequence',
        question: 'What number comes next in this sequence?',
        sequence: [1, 4, 9, 16, 25],
        answer: '36',
        options: ['30', '34', '36', '49'],
        explanation: 'Square numbers: 1, 4, 9, 16, 25, 36...'
      },
      {
        type: 'deduction',
        question: 'Tom is taller than Jerry. Jerry is taller than Spike. Spike is shorter than Tyke. Tyke is shorter than Jerry. Who is the tallest?',
        answer: 'tom',
        options: ['Tom', 'Jerry', 'Spike', 'Tyke'],
        explanation: 'Order from tallest: Tom, Jerry, Tyke, Spike'
      },
      {
        type: 'sequence',
        question: 'What number comes next in this sequence?',
        sequence: [2, 6, 12, 20, 30],
        answer: '42',
        options: ['38', '40', '42', '44'],
        explanation: 'Differences increase by 2: +4, +6, +8, +10, +12'
      }
    ];

    // State
    let currentPuzzles = [];
    let currentPuzzle = 0;
    let answers = [];
    let score = 0;
    let correctCount = 0;
    let startTime = Date.now();

    // DOM Elements
    const timerEl = document.getElementById('timer');
    const progressFill = document.getElementById('progressFill');
    const puzzleContainer = document.getElementById('puzzleContainer');
    const successScreen = document.getElementById('successScreen');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const correctDisplay = document.getElementById('correctDisplay');
    const puzzleNum = document.getElementById('puzzleNum');

    // Initialize
    function initPuzzles() {
      // Randomly select puzzle set
      currentPuzzles = Math.random() > 0.5 ? puzzles : puzzleSet2;
      renderPuzzle(0);
      updateTimer();
    }

    function updateTimer() {
      setInterval(function() {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        timerEl.textContent = String(minutes).padStart(2, '0') + ':' + String(seconds).padStart(2, '0');
      }, 1000);
    }

    function renderPuzzle(index) {
      const p = currentPuzzles[index];
      progressFill.style.width = ((index / currentPuzzles.length) * 100) + '%';
      puzzleNum.textContent = (index + 1) + '/' + currentPuzzles.length;

      // Clear container
      while (puzzleContainer.firstChild) {
        puzzleContainer.removeChild(puzzleContainer.firstChild);
      }

      const card = document.createElement('div');
      card.className = 'puzzle-card';

      // Header
      const header = document.createElement('div');
      header.className = 'puzzle-header';

      const numSpan = document.createElement('span');
      numSpan.className = 'puzzle-number';
      numSpan.textContent = 'Puzzle ' + (index + 1) + ' of ' + currentPuzzles.length;

      const typeSpan = document.createElement('span');
      typeSpan.className = 'puzzle-type';
      typeSpan.textContent = p.type.charAt(0).toUpperCase() + p.type.slice(1);

      header.appendChild(numSpan);
      header.appendChild(typeSpan);

      // Question
      const questionDiv = document.createElement('div');
      questionDiv.className = 'puzzle-question';
      questionDiv.textContent = p.question;

      card.appendChild(header);
      card.appendChild(questionDiv);

      // Sequence display (if applicable)
      if (p.sequence) {
        const seqDisplay = document.createElement('div');
        seqDisplay.className = 'sequence-display';

        p.sequence.forEach(function(item) {
          const itemDiv = document.createElement('div');
          itemDiv.className = 'sequence-item';
          itemDiv.textContent = item;
          seqDisplay.appendChild(itemDiv);
        });

        const unknownDiv = document.createElement('div');
        unknownDiv.className = 'sequence-item unknown';
        unknownDiv.textContent = '?';
        seqDisplay.appendChild(unknownDiv);

        card.appendChild(seqDisplay);
      }

      // Options (multiple choice)
      if (p.options) {
        const optionsList = document.createElement('div');
        optionsList.className = 'options-list';

        p.options.forEach(function(opt, i) {
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.setAttribute('data-value', opt.toLowerCase());
          btn.textContent = opt;
          btn.onclick = function() { selectOption(opt.toLowerCase(), p.answer.toLowerCase()); };
          optionsList.appendChild(btn);
        });

        card.appendChild(optionsList);
      }

      // Feedback area
      const feedbackDiv = document.createElement('div');
      feedbackDiv.className = 'feedback hidden';
      feedbackDiv.id = 'feedback';
      card.appendChild(feedbackDiv);

      puzzleContainer.appendChild(card);
    }

    function selectOption(selected, correct) {
      const isCorrect = selected === correct;

      // Calculate points
      let points = 0;
      if (isCorrect) {
        points = 200; // 200 points per correct answer (5 puzzles x 200 = 1000 max)
        score += points;
        correctCount++;
      }

      answers.push({
        puzzleIndex: currentPuzzle,
        selected: selected,
        correct: isCorrect,
        points: points
      });

      // Update displays
      scoreDisplay.textContent = score;
      correctDisplay.textContent = correctCount;

      // Show feedback
      const buttons = document.querySelectorAll('.option-btn');
      buttons.forEach(function(btn) {
        btn.disabled = true;
        const val = btn.getAttribute('data-value');
        if (val === correct) {
          btn.classList.add('correct');
        } else if (val === selected && val !== correct) {
          btn.classList.add('incorrect');
        }
      });

      const feedback = document.getElementById('feedback');
      feedback.classList.remove('hidden', 'correct', 'incorrect');
      feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
      feedback.textContent = isCorrect ? 'Correct!' : 'Incorrect. ' + currentPuzzles[currentPuzzle].explanation;

      setTimeout(function() {
        nextPuzzle();
      }, 2000);
    }

    function nextPuzzle() {
      if (currentPuzzle < currentPuzzles.length - 1) {
        currentPuzzle++;
        renderPuzzle(currentPuzzle);
      } else {
        showResults();
      }
    }

    function showResults() {
      const totalTime = (Date.now() - startTime) / 1000;
      const avgTime = totalTime / currentPuzzles.length;
      const finalScore = Math.min(1000, score);

      puzzleContainer.classList.add('hidden');
      progressFill.style.width = '100%';
      successScreen.classList.remove('hidden');

      document.getElementById('finalScore').textContent = finalScore;
      document.getElementById('finalCorrect').textContent = correctCount + '/' + currentPuzzles.length;
      document.getElementById('finalTime').textContent = totalTime.toFixed(1) + 's';
      document.getElementById('avgTime').textContent = avgTime.toFixed(1) + 's';
      document.getElementById('accuracy').textContent = Math.round((correctCount / currentPuzzles.length) * 100) + '%';

      const resultsGrid = document.getElementById('resultsGrid');
      while (resultsGrid.firstChild) {
        resultsGrid.removeChild(resultsGrid.firstChild);
      }

      answers.forEach(function(answer, i) {
        const box = document.createElement('div');
        box.className = 'result-box ' + (answer.correct ? 'correct' : 'incorrect');

        const pLabel = document.createElement('div');
        pLabel.textContent = 'P' + (i + 1);

        const result = document.createElement('div');
        result.textContent = answer.correct ? 'OK' : 'X';

        box.appendChild(pLabel);
        box.appendChild(result);
        resultsGrid.appendChild(box);
      });

      console.log('LOGIC_COMPLETE', {
        completionTime: totalTime,
        timestamp: Date.now(),
        correctCount: correctCount,
        totalPuzzles: currentPuzzles.length,
        answers: answers,
        score: finalScore
      });
    }

    // Start
    initPuzzles();
  </script>
</body>
</html>
